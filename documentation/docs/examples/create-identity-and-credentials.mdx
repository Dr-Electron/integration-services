# Create Identity and Credentials

The [example-1](https://github.com/iotaledger/integration-services/blob/develop/clients/node/examples/1-CreateIdentityAndCredential.ts)
script authenticates a Integration Service client to manage Identities using the Admin identity
created in [example-0](./how-to-run-examples) and then performs the following tasks:

* create a new Identity (`userIdentity`)
* create a credential for that identity (`userCredential`)
* verify the credential generated (`await identity.checkCredential(userCredential)`)

You can run the example with the following:

```bash
npm run example-1
```

## Authentication

Here's how authenticate the client using the Admin identity and how to get the 
BasicIdentityCredential that the admin owns: this VC (Verifiable Credential) 
is required for an Issuer to sign Verifiable Credentials for other Identities.

```js
import { IdentityClient, IdentityJson } from 'iota-is-sdk';

...

const identity = new IdentityClient(...config...);

// Recover the admin identity
const adminIdentity = JSON.parse(readFileSync("./adminIdentity.json").toString()) as IdentityJson;

// Authenticate as the admin identity
await identity.authenticate(adminIdentity.doc.id, adminIdentity.key.secret);

// Get admin identity data
const adminIdentityPublic = await identity.find(adminIdentity.doc.id);

// Get admin identy's VC
const identityCredential = adminIdentityPublic?.verifiableCredentials?.[0];

console.log("Identity Credential of Admin", identityCredential);
```

## Create identity

The method `createCredential` requires a valid Verifiable Credential of type
BasicIdentity, the destination DID the type and the claim.

```js
// Create identity for user
const userIdentity = await identity.create('User');

console.log('~~~~~~~~~~~~~~~~');
console.log('Created user identity: ', userIdentity);
console.log('~~~~~~~~~~~~~~~~');
// Assign a verifiable credential to the user as rootIdentity.
// With the BasicIdentityCredential the user is not allowed to issue further credentials
const userCredential = await identity.createCredential(
    identityCredential,
    userIdentity?.doc?.id,
    CredentialTypes.BasicIdentityCredential,
    UserType.Person,
    {
        profession: 'Professor'
    }
);
```

## Verify a credential 

You can verify a credential with the following:

```js
const verified = await identity.checkCredential(userCredential);

console.log('Verification result: ', verified);
```
